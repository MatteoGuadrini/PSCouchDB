

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Documents &mdash; PSCouchDB  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Design documents" href="ddoc.html" />
    <link rel="prev" title="Databases" href="databases.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> PSCouchDB
          

          
            
            <img src="_static/pscouchdb-logo.svg" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="config.html">Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="config.html#nodes">Nodes</a></li>
<li class="toctree-l1"><a class="reference internal" href="config.html#configuration">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="permission.html">Permission</a></li>
<li class="toctree-l1"><a class="reference internal" href="server.html">Server operation</a></li>
<li class="toctree-l1"><a class="reference internal" href="server.html#replication">Replication</a></li>
<li class="toctree-l1"><a class="reference internal" href="auth.html">Authentication</a></li>
<li class="toctree-l1"><a class="reference internal" href="databases.html">Databases</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Documents</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#get-a-document">Get a document</a></li>
<li class="toctree-l2"><a class="reference internal" href="#get-partitioned-documents">Get partitioned documents</a></li>
<li class="toctree-l2"><a class="reference internal" href="#create-a-document">Create a document</a></li>
<li class="toctree-l2"><a class="reference internal" href="#modify-a-document">Modify a document</a></li>
<li class="toctree-l2"><a class="reference internal" href="#delete-a-document">Delete a document</a></li>
<li class="toctree-l2"><a class="reference internal" href="#copy-a-document">Copy a document</a></li>
<li class="toctree-l2"><a class="reference internal" href="#local-document">Local document</a></li>
<li class="toctree-l2"><a class="reference internal" href="#get-a-bulk-documents">Get a bulk documents</a></li>
<li class="toctree-l2"><a class="reference internal" href="#create-documents-in-bulk">Create documents in bulk</a></li>
<li class="toctree-l2"><a class="reference internal" href="#attachments">Attachments</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#get-an-attachment">Get an attachment</a></li>
<li class="toctree-l3"><a class="reference internal" href="#create-an-attachment">Create an attachment</a></li>
<li class="toctree-l3"><a class="reference internal" href="#delete-an-attachment">Delete an attachment</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#revisions">Revisions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#get-a-list-of-revisions">Get a list of revisions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-a-history-of-revisions">Get a history of revisions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-a-specific-revision">Get a specific revision</a></li>
<li class="toctree-l3"><a class="reference internal" href="#missing-revision">Missing revision</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#purge-document">Purge document</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#query">Query</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#find-a-document">Find a document</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#search-a-document">Search a document</a></li>
<li class="toctree-l3"><a class="reference internal" href="#selector">Selector</a></li>
<li class="toctree-l3"><a class="reference internal" href="#operators">Operators</a></li>
<li class="toctree-l3"><a class="reference internal" href="#logical-operators">Logical operators</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sort">Sort</a></li>
<li class="toctree-l3"><a class="reference internal" href="#limit">Limit</a></li>
<li class="toctree-l3"><a class="reference internal" href="#skip">Skip</a></li>
<li class="toctree-l3"><a class="reference internal" href="#use-index">Use index</a></li>
<li class="toctree-l3"><a class="reference internal" href="#read-quorum">Read quorum</a></li>
<li class="toctree-l3"><a class="reference internal" href="#bookmark">Bookmark</a></li>
<li class="toctree-l3"><a class="reference internal" href="#no-update">No Update</a></li>
<li class="toctree-l3"><a class="reference internal" href="#stable">Stable</a></li>
<li class="toctree-l3"><a class="reference internal" href="#stale">Stale</a></li>
<li class="toctree-l3"><a class="reference internal" href="#execution-statistics">Execution statistics</a></li>
<li class="toctree-l3"><a class="reference internal" href="#explain">Explain</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="ddoc.html">Design documents</a></li>
<li class="toctree-l1"><a class="reference internal" href="cmdlets.html">Preferences</a></li>
<li class="toctree-l1"><a class="reference internal" href="cmdlets.html#cmdlets-and-aliases">Cmdlets and aliases</a></li>
<li class="toctree-l1"><a class="reference internal" href="classes.html">Classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="uses.html">Real uses</a></li>
<li class="toctree-l1"><a class="reference internal" href="support.html">Support</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">PSCouchDB</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Documents</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/documents.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="documents">
<h1>Documents<a class="headerlink" href="#documents" title="Permalink to this headline">¶</a></h1>
<p>All documents are contained in a database. Each document is in json format.</p>
<div class="section" id="get-a-document">
<h2>Get a document<a class="headerlink" href="#get-a-document" title="Permalink to this headline">¶</a></h2>
<p>To get document by the specified <code class="docutils literal notranslate"><span class="pre">Document</span></code> from the specified <code class="docutils literal notranslate"><span class="pre">Database</span></code>. Unless you request a specific revision, the latest revision of the document will always be returned.</p>
<div class="highlight-powershell notranslate"><div class="highlight"><pre><span></span><span class="nb">Get-CouchDBDocument</span> <span class="n">-Database</span> <span class="n">test</span> <span class="n">-Document</span> <span class="s2">&quot;Hitchhikers&quot;</span> <span class="n">-Authorization</span> <span class="s2">&quot;admin:password&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="get-partitioned-documents">
<h2>Get partitioned documents<a class="headerlink" href="#get-partitioned-documents" title="Permalink to this headline">¶</a></h2>
<div class="highlight-powershell notranslate"><div class="highlight"><pre><span></span><span class="nb">Get-CouchDBDocument</span> <span class="n">-Database</span> <span class="n">test</span> <span class="n">-Partition</span> <span class="n">testing</span> <span class="n">-Authorization</span> <span class="s2">&quot;admin:password&quot;</span>
</pre></div>
</div>
<p>In this table you can find all the possible parameters to get the document.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 12%" />
<col style="width: 88%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>PARAMETER</p></th>
<th class="head"><p>DESCRIPTION</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Revision</p></td>
<td><p>The CouchDB revision document.</p></td>
</tr>
<tr class="row-odd"><td><p>Local</p></td>
<td><p>Return CouchDB local document.</p></td>
</tr>
<tr class="row-even"><td><p>Revisions</p></td>
<td><p>Return all CouchDB db revisions.</p></td>
</tr>
<tr class="row-odd"><td><p>History</p></td>
<td><p>Return all info CouchDB db revisions.</p></td>
</tr>
<tr class="row-even"><td><p>Attachments</p></td>
<td><p>Includes attachments bodies in response.</p></td>
</tr>
<tr class="row-odd"><td><p>AttachmentsInfo</p></td>
<td><p>Includes encoding information in attachment stubs if the particular attachment is compressed.</p></td>
</tr>
<tr class="row-even"><td><p>AttachmentsSince</p></td>
<td><p>Includes attachments only since specified revisions. Doesn’t includes attachments for specified revisions.</p></td>
</tr>
<tr class="row-odd"><td><p>Conflicts</p></td>
<td><p>Includes information about conflicts in document.</p></td>
</tr>
<tr class="row-even"><td><p>DeletedConflicts</p></td>
<td><p>Includes information about deleted conflicted revisions.</p></td>
</tr>
<tr class="row-odd"><td><p>Latest</p></td>
<td><p>Forces retrieving latest “leaf” revision, no matter what rev was requested.</p></td>
</tr>
<tr class="row-even"><td><p>LocalSequence</p></td>
<td><p>Includes last update sequence for the document.</p></td>
</tr>
<tr class="row-odd"><td><p>Metadata</p></td>
<td><p>Acts same as specifying all conflicts, deleted_conflicts and revs_info query parameters.</p></td>
</tr>
<tr class="row-even"><td><p>OpenRevisions</p></td>
<td><p>Retrieves documents of specified leaf revisions. Additionally, value all id default and  to return all leaf revisions.</p></td>
</tr>
</tbody>
</table>
<p>And if use <strong>_all_docs</strong> view, in this table you can find all the possible parameters.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 5%" />
<col style="width: 95%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>PARAMETER</p></th>
<th class="head"><p>DESCRIPTION</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Descending</p></td>
<td><p>Return the documents in descending by key order. Default is <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p>EndKey</p></td>
<td><p>Stop returning records when the specified key is reached.</p></td>
</tr>
<tr class="row-even"><td><p>EndKeyDocument</p></td>
<td><p>Stop returning records when the specified document ID is reached.</p></td>
</tr>
<tr class="row-odd"><td><p>Group</p></td>
<td><p>Group the results using the reduce function to a group or single row. Implies reduce is <code class="docutils literal notranslate"><span class="pre">true</span></code> and the maximum group_level. Default is <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p>GroupLevel</p></td>
<td><p>Specify the group level to be used. Implies group is <code class="docutils literal notranslate"><span class="pre">true</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p>IncludeDocuments</p></td>
<td><p>Include the associated document with each row. Default is <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p>InclusiveEnd</p></td>
<td><p>Specifies whether the specified end key should be included in the result. Default is <code class="docutils literal notranslate"><span class="pre">true</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p>Key</p></td>
<td><p>Return only documents that match the specified key. The document must be _all_docs.</p></td>
</tr>
<tr class="row-even"><td><p>Keys</p></td>
<td><p>Return only documents where the key matches one of the keys specified in the array.</p></td>
</tr>
<tr class="row-odd"><td><p>Limit</p></td>
<td><p>Limit the number of the returned design documents to the specified number.</p></td>
</tr>
<tr class="row-even"><td><p>Reduce</p></td>
<td><p>Use the reduction function. Default is true when a reduce function is defined.</p></td>
</tr>
<tr class="row-odd"><td><p>Skip</p></td>
<td><p>Skip this number of records before starting to return the results.</p></td>
</tr>
<tr class="row-even"><td><p>Sorted</p></td>
<td><p>Sort returned rows. Setting this to false offers a performance boost. The total_rows and offset fields are not available when this is set to <code class="docutils literal notranslate"><span class="pre">false</span></code>. Default is <code class="docutils literal notranslate"><span class="pre">true</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p>Stable</p></td>
<td><p>Whether or not the view results should be returned from a stable set of shards. Default is <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p>Stale</p></td>
<td><p>Allow the results from a stale view to be used. Supported values: <code class="docutils literal notranslate"><span class="pre">ok</span></code>, <code class="docutils literal notranslate"><span class="pre">update_after</span> <span class="pre">and</span></code> <code class="docutils literal notranslate"><span class="pre">false</span></code>. <code class="docutils literal notranslate"><span class="pre">ok</span></code> is equivalent to <code class="docutils literal notranslate"><span class="pre">stable=true&amp;update=false</span></code>. <code class="docutils literal notranslate"><span class="pre">update_after</span></code> is equivalent to <code class="docutils literal notranslate"><span class="pre">stable=true&amp;update=lazy</span></code>. <code class="docutils literal notranslate"><span class="pre">false</span></code> is equivalent to <code class="docutils literal notranslate"><span class="pre">stable=false&amp;update=true</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p>StartKey</p></td>
<td><p>Return records starting with the specified key.</p></td>
</tr>
<tr class="row-even"><td><p>StartKeyDocument</p></td>
<td><p>Return records starting with the specified document ID. Ignored if startkey is not set.</p></td>
</tr>
<tr class="row-odd"><td><p>Update</p></td>
<td><p>Whether or not the view in question should be updated prior to responding to the user. Supported values: <code class="docutils literal notranslate"><span class="pre">true</span></code>, <code class="docutils literal notranslate"><span class="pre">false</span></code>, <code class="docutils literal notranslate"><span class="pre">lazy</span></code>. Default is <code class="docutils literal notranslate"><span class="pre">true</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p>UpdateSequence</p></td>
<td><p>Whether to include in the response an update_seq value indicating the sequence id of the database the view reflects. Default is <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="create-a-document">
<h2>Create a document<a class="headerlink" href="#create-a-document" title="Permalink to this headline">¶</a></h2>
<p>To creates a new named document, or creates a new revision of the existing document. The <code class="docutils literal notranslate"><span class="pre">Data</span></code> parameter it can be a json or a hashtable object.</p>
<div class="highlight-powershell notranslate"><div class="highlight"><pre><span></span><span class="nv">$data</span> <span class="p">=</span> <span class="s1">&#39;{&quot;planet&quot;:&quot;Magrathea&quot;, &quot;name&quot;:&quot;Slartibartfast&quot;}&#39;</span>
<span class="nb">New-CouchDBDocument</span> <span class="n">-Database</span> <span class="n">test</span> <span class="n">-Document</span> <span class="s2">&quot;Hitchhikers&quot;</span> <span class="n">-Data</span> <span class="nv">$data</span> <span class="n">-Authorization</span> <span class="s2">&quot;admin:password&quot;</span>
</pre></div>
</div>
<p>There is also the possibility of enabling a batch mode.</p>
<div class="highlight-powershell notranslate"><div class="highlight"><pre><span></span><span class="nv">$data</span> <span class="p">=</span> <span class="s1">&#39;{&quot;planet&quot;:&quot;Magrathea&quot;, &quot;name&quot;:&quot;Slartibartfast&quot;}&#39;</span>
<span class="nb">New-CouchDBDocument</span> <span class="n">-Database</span> <span class="n">test</span> <span class="n">-Document</span> <span class="s2">&quot;Hitchhikers&quot;</span> <span class="n">-Data</span> <span class="nv">$data</span> <span class="n">-BatchMode</span> <span class="n">-Authorization</span> <span class="s2">&quot;admin:password&quot;</span>
<span class="nb">Write-CouchDBFullCommit</span> <span class="n">-Database</span> <span class="n">test</span> <span class="n">-Authorization</span> <span class="s2">&quot;admin:password&quot;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Until you run the <code class="docutils literal notranslate"><span class="pre">Write-CouchDBFullCommit</span></code> cmdlet, the document will not be written to disk but kept only in memory. This can be useful in case of bulk writing.</p>
</div>
</div>
<div class="section" id="modify-a-document">
<h2>Modify a document<a class="headerlink" href="#modify-a-document" title="Permalink to this headline">¶</a></h2>
<p>With <code class="docutils literal notranslate"><span class="pre">Revision</span></code> parameter it is possible to overwrite the document. The document retain the previously written elements. If an item is specified again, it will be overwritten.</p>
<div class="highlight-powershell notranslate"><div class="highlight"><pre><span></span><span class="nv">$data</span> <span class="p">=</span> <span class="p">@{</span><span class="s2">&quot;answer&quot;</span><span class="p">=</span><span class="n">42</span><span class="p">;</span> <span class="s2">&quot;ask&quot;</span><span class="p">=</span><span class="s2">&quot;Ultimate Question of Life, the Universe and Everything&quot;</span><span class="p">}</span>
<span class="nb">Set-CouchDBDocument</span> <span class="n">-Database</span> <span class="n">test</span> <span class="n">-Document</span> <span class="s2">&quot;Hitchhikers&quot;</span> <span class="n">-Revision</span> <span class="n">1</span><span class="p">-</span><span class="n">2c903913030efb4d711db085b1f44107</span> <span class="n">-Data</span> <span class="nv">$data</span> <span class="n">-Authorization</span> <span class="s2">&quot;admin:password&quot;</span>
</pre></div>
</div>
<p>With <code class="docutils literal notranslate"><span class="pre">Replace</span></code> parameter, the document is re-write again.</p>
<div class="highlight-powershell notranslate"><div class="highlight"><pre><span></span><span class="nv">$data</span> <span class="p">=</span> <span class="s1">&#39;{&quot;planet&quot;:&quot;Heart&quot;, &quot;name&quot;:&quot;Arthur Dent&quot;}&#39;</span>
<span class="nb">Set-CouchDBDocument</span> <span class="n">-Database</span> <span class="n">test</span> <span class="n">-Document</span> <span class="s2">&quot;Hitchhikers&quot;</span> <span class="n">-Revision</span> <span class="n">2</span><span class="p">-</span><span class="n">9a68ee74a8276c7f11146245ba43676f</span> <span class="n">-Data</span> <span class="nv">$data</span> <span class="o">-Replace</span> <span class="n">-Authorization</span> <span class="s2">&quot;admin:password&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="delete-a-document">
<h2>Delete a document<a class="headerlink" href="#delete-a-document" title="Permalink to this headline">¶</a></h2>
<p>To delete a document, specify <code class="docutils literal notranslate"><span class="pre">Revision</span></code> parameter.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>CouchDB doesn’t completely delete the specified document. Instead, it leaves a tombstone with very basic information about the document. The tombstone is required so that the delete action can be replicated across databases.</p>
</div>
<div class="highlight-powershell notranslate"><div class="highlight"><pre><span></span><span class="nb">Remove-CouchDBDocument</span> <span class="n">-Database</span> <span class="n">test</span> <span class="n">-Document</span> <span class="s2">&quot;Hitchhikers&quot;</span> <span class="n">-Revision</span> <span class="s2">&quot;3-399796e5ce019e04311637e8a8a0f402&quot;</span> <span class="n">-Authorization</span> <span class="s2">&quot;admin:password&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="copy-a-document">
<h2>Copy a document<a class="headerlink" href="#copy-a-document" title="Permalink to this headline">¶</a></h2>
<p>Copies an existing document to a new or existing document. Copying a document is only possible within the same database.</p>
<div class="highlight-powershell notranslate"><div class="highlight"><pre><span></span><span class="nb">Copy-CouchDBDocument</span> <span class="n">-Database</span> <span class="n">test</span> <span class="n">-Document</span> <span class="s2">&quot;Hitchhikers&quot;</span> <span class="n">-Destination</span> <span class="s2">&quot;Hitchhikers Guide&quot;</span> <span class="n">-Authorization</span> <span class="s2">&quot;admin:password&quot;</span>
<span class="nb">Copy-CouchDBDocument</span> <span class="n">-Database</span> <span class="n">test</span> <span class="n">-Document</span> <span class="s2">&quot;Hitchhikers&quot;</span> <span class="n">-Destination</span> <span class="s2">&quot;Hitchhikers Guide _deleted&quot;</span> <span class="n">-Revision</span> <span class="n">3</span><span class="p">-</span><span class="n">399796e5ce019e04311637e8a8a0f402</span> <span class="n">-Authorization</span> <span class="s2">&quot;admin:password&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="local-document">
<h2>Local document<a class="headerlink" href="#local-document" title="Permalink to this headline">¶</a></h2>
<p>To get of all of the local documents in a given database.</p>
<div class="highlight-powershell notranslate"><div class="highlight"><pre><span></span><span class="nb">Get-CouchDBDocument</span> <span class="n">-Database</span> <span class="n">test</span> <span class="n">-Local</span> <span class="n">-Authorization</span> <span class="s2">&quot;admin:password&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="get-a-bulk-documents">
<h2>Get a bulk documents<a class="headerlink" href="#get-a-bulk-documents" title="Permalink to this headline">¶</a></h2>
<p>This method can be called to query several documents in bulk.</p>
<div class="highlight-powershell notranslate"><div class="highlight"><pre><span></span><span class="n">using</span> <span class="n">module</span> <span class="n">PSCouchDB</span>
<span class="nv">$bdocs</span> <span class="p">=</span> <span class="nb">New-Object</span> <span class="n">PSCouchDBBulkDocument</span> <span class="n">-ArgumentList</span> <span class="s1">&#39;{&quot;_id&quot;:&quot;test&quot;}&#39;</span>
<span class="nv">$bdocs</span><span class="p">.</span><span class="n">AddDocument</span><span class="p">(</span><span class="s1">&#39;{&quot;_id&quot;:&quot;test1&quot;,&quot;_rev&quot;:&quot;2-9a68ee74a8276c7f11146245ba43676f&quot;}&#39;</span><span class="p">)</span>
<span class="nb">Get-CouchDBBulkDocument</span> <span class="n">-Database</span> <span class="n">test</span> <span class="n">-Data</span> <span class="nv">$bdocs</span> <span class="n">-Authorization</span> <span class="s2">&quot;admin:password&quot;</span>
</pre></div>
</div>
<p>or run in background:</p>
<div class="highlight-powershell notranslate"><div class="highlight"><pre><span></span><span class="n">using</span> <span class="n">module</span> <span class="n">PSCouchDB</span>
<span class="nv">$bdocs</span> <span class="p">=</span> <span class="nb">New-Object</span> <span class="n">PSCouchDBBulkDocument</span> <span class="n">-ArgumentList</span> <span class="s1">&#39;{&quot;_id&quot;:&quot;test&quot;}&#39;</span>
<span class="nv">$bdocs</span><span class="p">.</span><span class="n">AddDocument</span><span class="p">(</span><span class="s1">&#39;{&quot;_id&quot;:&quot;test1&quot;,&quot;_rev&quot;:&quot;2-9a68ee74a8276c7f11146245ba43676f&quot;}&#39;</span><span class="p">)</span>
<span class="nb">Get-CouchDBBulkDocument</span> <span class="n">-Database</span> <span class="n">test</span> <span class="n">-Document</span> <span class="s2">&quot;Hitchhikers&quot;</span><span class="p">,</span><span class="s2">&quot;Hitchhikers Guide _deleted&quot;</span><span class="p">,</span><span class="s2">&quot;Hitchhikers Guide&quot;</span> <span class="n">-AsJob</span>
<span class="nb">Get-Job</span> <span class="n">-Id</span> <span class="n">1</span> <span class="p">|</span> <span class="nb">Receive-Job</span> <span class="n">-Keep</span>
</pre></div>
</div>
</div>
<div class="section" id="create-documents-in-bulk">
<h2>Create documents in bulk<a class="headerlink" href="#create-documents-in-bulk" title="Permalink to this headline">¶</a></h2>
<p>The bulk document API allows you to create and update multiple documents at the same time within a single request.</p>
<div class="highlight-powershell notranslate"><div class="highlight"><pre><span></span><span class="n">using</span> <span class="n">module</span> <span class="n">PSCouchDB</span>
<span class="nv">$bdocs</span> <span class="p">=</span> <span class="nb">New-Object</span> <span class="n">PSCouchDBBulkDocument</span> <span class="n">-ArgumentList</span> <span class="s1">&#39;{&quot;_id&quot;:&quot;test&quot;,&quot;name&quot;:&quot;test&quot;}&#39;</span>
<span class="nv">$bdocs</span><span class="p">.</span><span class="n">AddDocument</span><span class="p">(</span><span class="s1">&#39;{&quot;_id&quot;:&quot;test1&quot;,&quot;name&quot;:&quot;test&quot;}&#39;</span><span class="p">)</span>
<span class="nb">New-CouchDBBulkDocument</span> <span class="n">-Database</span> <span class="n">test</span> <span class="n">-Data</span> <span class="nv">$bdocs</span> <span class="n">-Authorization</span> <span class="s2">&quot;admin:password&quot;</span>
</pre></div>
</div>
<p>or run in background:</p>
<div class="highlight-powershell notranslate"><div class="highlight"><pre><span></span><span class="n">using</span> <span class="n">module</span> <span class="n">PSCouchDB</span>
<span class="nv">$bdocs</span> <span class="p">=</span> <span class="nb">New-Object</span> <span class="n">PSCouchDBBulkDocument</span> <span class="n">-ArgumentList</span> <span class="s1">&#39;{&quot;_id&quot;:&quot;test&quot;,&quot;name&quot;:&quot;test&quot;}&#39;</span>
<span class="nv">$bdocs</span><span class="p">.</span><span class="n">AddDocument</span><span class="p">(</span><span class="s1">&#39;{&quot;_id&quot;:&quot;test1&quot;,&quot;name&quot;:&quot;test&quot;}&#39;</span><span class="p">)</span>
<span class="nb">New-CouchDBBulkDocument</span> <span class="n">-Database</span> <span class="n">test</span> <span class="n">-Data</span> <span class="nv">$bdocs</span> <span class="n">-Authorization</span> <span class="s2">&quot;admin:password&quot;</span> <span class="n">-AsJob</span>
<span class="nb">Get-Job</span> <span class="n">-Id</span> <span class="n">1</span> <span class="p">|</span> <span class="nb">Receive-Job</span> <span class="n">-Keep</span>
</pre></div>
</div>
</div>
<div class="section" id="attachments">
<h2>Attachments<a class="headerlink" href="#attachments" title="Permalink to this headline">¶</a></h2>
<p>Document can includes attachments, then the returned structure will contain a summary of the attachments associated with the document.</p>
<div class="section" id="get-an-attachment">
<h3>Get an attachment<a class="headerlink" href="#get-an-attachment" title="Permalink to this headline">¶</a></h3>
<p>It’s possible to retrieve document with all attached files content.</p>
<div class="highlight-powershell notranslate"><div class="highlight"><pre><span></span><span class="nb">Get-CouchDBAttachment</span> <span class="n">-Database</span> <span class="n">test</span> <span class="n">-Document</span> <span class="s2">&quot;Hitchhikers&quot;</span> <span class="n">-Attachment</span> <span class="n">test</span><span class="p">.</span><span class="n">txt</span> <span class="n">-Authorization</span> <span class="s2">&quot;admin:password&quot;</span>
</pre></div>
</div>
<p>Also is possible save a file.</p>
<div class="highlight-powershell notranslate"><div class="highlight"><pre><span></span><span class="nb">Get-CouchDBAttachment</span> <span class="n">-Database</span> <span class="n">test</span> <span class="n">-Document</span> <span class="s2">&quot;Hitchhikers&quot;</span> <span class="n">-Attachment</span> <span class="n">test</span><span class="p">.</span><span class="n">txt</span> <span class="n">-OutFile</span> <span class="s2">&quot;C:\out.txt&quot;</span> <span class="n">-Authorization</span> <span class="s2">&quot;admin:password&quot;</span>
</pre></div>
</div>
<p>Or get info of specific attachment.</p>
<div class="highlight-powershell notranslate"><div class="highlight"><pre><span></span><span class="nb">Get-CouchDBAttachment</span> <span class="n">-Database</span> <span class="n">test</span> <span class="n">-Document</span> <span class="s2">&quot;Hitchhikers&quot;</span> <span class="n">-Attachment</span> <span class="n">test</span><span class="p">.</span><span class="n">txt</span> <span class="n">-Info</span> <span class="n">-Authorization</span> <span class="s2">&quot;admin:password&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="create-an-attachment">
<h3>Create an attachment<a class="headerlink" href="#create-an-attachment" title="Permalink to this headline">¶</a></h3>
<p>To replace or add an attachment.</p>
<div class="highlight-powershell notranslate"><div class="highlight"><pre><span></span><span class="nb">Add-CouchDBAttachment</span> <span class="n">-Database</span> <span class="n">test</span> <span class="n">-Document</span> <span class="s2">&quot;Hitchhikers&quot;</span> <span class="n">-Attachment</span> <span class="s2">&quot;C:\test.txt&quot;</span> <span class="n">-Revision</span> <span class="s2">&quot;4-f6d66c4d70da66cded6bea889468eb14&quot;</span> <span class="n">-Authorization</span> <span class="s2">&quot;admin:password&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="delete-an-attachment">
<h3>Delete an attachment<a class="headerlink" href="#delete-an-attachment" title="Permalink to this headline">¶</a></h3>
<p>To remove an attachment.</p>
<div class="highlight-powershell notranslate"><div class="highlight"><pre><span></span><span class="nb">Remove-CouchDBAttachment</span> <span class="n">-Database</span> <span class="n">test</span> <span class="n">-Document</span> <span class="s2">&quot;Hitchhikers&quot;</span> <span class="n">-Attachment</span> <span class="n">out</span><span class="p">.</span><span class="n">txt</span> <span class="n">-Revision</span> <span class="s2">&quot;5-7bf1766d9a5f3e4a60b400e98d62f523&quot;</span> <span class="n">-Authorization</span> <span class="s2">&quot;admin:password&quot;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="revisions">
<h2>Revisions<a class="headerlink" href="#revisions" title="Permalink to this headline">¶</a></h2>
<div class="section" id="get-a-list-of-revisions">
<h3>Get a list of revisions<a class="headerlink" href="#get-a-list-of-revisions" title="Permalink to this headline">¶</a></h3>
<p>You can obtain a list of the revisions for a given document.</p>
<div class="highlight-powershell notranslate"><div class="highlight"><pre><span></span><span class="nb">Get-CouchDBDocument</span> <span class="n">-Database</span> <span class="n">test</span> <span class="n">-Document</span> <span class="s2">&quot;Hitchhikers&quot;</span> <span class="n">-Revisions</span> <span class="n">-Authorization</span> <span class="s2">&quot;admin:password&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="get-a-history-of-revisions">
<h3>Get a history of revisions<a class="headerlink" href="#get-a-history-of-revisions" title="Permalink to this headline">¶</a></h3>
<p>You can get additional information (history) about the revisions for a given document.</p>
<div class="highlight-powershell notranslate"><div class="highlight"><pre><span></span><span class="nb">Get-CouchDBDocument</span> <span class="n">-Database</span> <span class="n">test</span> <span class="n">-Document</span> <span class="s2">&quot;Hitchhikers&quot;</span> <span class="n">-History</span> <span class="n">-Authorization</span> <span class="s2">&quot;admin:password&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="get-a-specific-revision">
<h3>Get a specific revision<a class="headerlink" href="#get-a-specific-revision" title="Permalink to this headline">¶</a></h3>
<p>To get a specific revision, use the <code class="docutils literal notranslate"><span class="pre">Revision</span></code> parameter, and specify the full revision number.</p>
<div class="highlight-powershell notranslate"><div class="highlight"><pre><span></span><span class="nb">Get-CouchDBDocument</span> <span class="n">-Database</span> <span class="n">test</span> <span class="n">-Document</span> <span class="s2">&quot;Hitchhikers&quot;</span> <span class="n">-Revision</span> <span class="s2">&quot;5-7bf1766d9a5f3e4a60b400e98d62f523&quot;</span> <span class="n">-Authorization</span> <span class="s2">&quot;admin:password&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="missing-revision">
<h3>Missing revision<a class="headerlink" href="#missing-revision" title="Permalink to this headline">¶</a></h3>
<p>With given a list of document revisions, returns the document revisions that do not exist in the database.</p>
<div class="highlight-powershell notranslate"><div class="highlight"><pre><span></span><span class="nb">Get-CouchDBMissingRevision</span> <span class="n">-Database</span> <span class="n">test</span> <span class="n">-Document</span> <span class="s2">&quot;Hitchhikers&quot;</span> <span class="n">-Revision</span> <span class="n">2</span><span class="p">-</span><span class="n">7051cbe5c8faecd085a3fa619e6e6337</span><span class="p">,</span><span class="n">5</span><span class="p">-</span><span class="n">7bf1766d9a5f3e4a60b400e98d62f523</span> <span class="n">-Authorization</span> <span class="s2">&quot;admin:password&quot;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="purge-document">
<h2>Purge document<a class="headerlink" href="#purge-document" title="Permalink to this headline">¶</a></h2>
<p>A database purge permanently removes the references to documents in the database.
Normal deletion of a document within CouchDB does not remove the document from the database, instead, the document is marked as _deleted=true (and a new revision is created).
This is to ensure that deleted documents can be replicated to other databases as having been deleted.</p>
<div class="highlight-powershell notranslate"><div class="highlight"><pre><span></span><span class="nb">Clear-CouchDBDocuments</span> <span class="n">-Database</span> <span class="n">test</span> <span class="n">-Document</span> <span class="s2">&quot;Hitchhikers&quot;</span> <span class="n">-Authorization</span> <span class="s2">&quot;admin:password&quot;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="query">
<h1>Query<a class="headerlink" href="#query" title="Permalink to this headline">¶</a></h1>
<div class="section" id="find-a-document">
<h2>Find a document<a class="headerlink" href="#find-a-document" title="Permalink to this headline">¶</a></h2>
<p>To search for documents in a database, use the following cmdlet.</p>
<div class="highlight-powershell notranslate"><div class="highlight"><pre><span></span><span class="nb">Find-CouchDBDocuments</span> <span class="n">-Database</span> <span class="n">test</span> <span class="n">-Selector</span> <span class="s2">&quot;name&quot;</span> <span class="n">-Operator</span> <span class="n">eq</span> <span class="n">-Value</span> <span class="s2">&quot;Arthur Dent&quot;</span> <span class="n">-Fields</span> <span class="n">_id</span><span class="p">,</span><span class="n">name</span><span class="p">,</span><span class="n">planet</span> <span class="n">-Authorization</span> <span class="s2">&quot;admin:password&quot;</span>
</pre></div>
</div>
<p>or with native Mango query</p>
<div class="highlight-powershell notranslate"><div class="highlight"><pre><span></span><span class="nb">Find-CouchDBDocuments</span> <span class="n">-Database</span> <span class="n">test</span> <span class="n">-Find</span> <span class="s1">&#39;{&quot;selector&quot;: {&quot;name&quot;:{&quot;$eq&quot;:&quot;Arthur Dent&quot;}},&quot;fields&quot;:[&quot;_id&quot;,&quot;name&quot;,&quot;planet&quot;]}&#39;</span> <span class="n">-Authorization</span> <span class="s2">&quot;admin:password&quot;</span>
</pre></div>
</div>
<p>or with class (for complex query)</p>
<div class="highlight-powershell notranslate"><div class="highlight"><pre><span></span><span class="n">using</span> <span class="n">module</span> <span class="n">PSCouchDB</span>
<span class="nv">$q</span> <span class="p">=</span> <span class="nb">New-Object</span> <span class="n">-TypeName</span> <span class="n">PSCouchDBQuery</span>
<span class="nv">$q</span><span class="p">.</span><span class="n">AddSelector</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span><span class="s2">&quot;Arthur Dent&quot;</span><span class="p">)</span>
<span class="nv">$q</span><span class="p">.</span><span class="n">AddSelectorOperator</span><span class="p">(</span><span class="s1">&#39;$eq&#39;</span><span class="p">)</span>
<span class="nv">$q</span><span class="p">.</span><span class="n">AddFields</span><span class="p">(</span><span class="s2">&quot;_id&quot;</span><span class="p">)</span>
<span class="nv">$q</span><span class="p">.</span><span class="n">AddFields</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">)</span>
<span class="nv">$q</span><span class="p">.</span><span class="n">AddFields</span><span class="p">(</span><span class="s2">&quot;planet&quot;</span><span class="p">)</span>
<span class="nb">Find-CouchDBDocuments</span> <span class="n">-Database</span> <span class="n">test</span> <span class="n">-Find</span> <span class="nv">$q</span><span class="p">.</span><span class="n">GetNativeQuery</span><span class="p">()</span> <span class="n">-Authorization</span> <span class="s2">&quot;admin:password&quot;</span>
</pre></div>
</div>
<p>or search partitioned documents in a database, use the following cmdlet.</p>
<div class="highlight-powershell notranslate"><div class="highlight"><pre><span></span><span class="nb">Find-CouchDBDocuments</span> <span class="n">-Database</span> <span class="n">test</span> <span class="n">-Partition</span> <span class="n">test</span> <span class="n">-Selector</span> <span class="s2">&quot;name&quot;</span> <span class="n">-Operator</span> <span class="n">eq</span> <span class="n">-Value</span> <span class="s2">&quot;Arthur Dent&quot;</span> <span class="n">-Fields</span> <span class="n">_id</span><span class="p">,</span><span class="n">name</span><span class="p">,</span><span class="n">planet</span>
</pre></div>
</div>
<p>If you want to use Mango queries, follow the next sections. Otherwise you can see more examples in the <a class="reference external" href="classes.html">Classes section</a>.</p>
<div class="section" id="search-a-document">
<h3>Search a document<a class="headerlink" href="#search-a-document" title="Permalink to this headline">¶</a></h3>
<p>To perform a more generic search in a database, without knowing the various selectors, use:</p>
<div class="highlight-powershell notranslate"><div class="highlight"><pre><span></span><span class="nb">Search-CouchDBFullText</span> <span class="n">-Database</span> <span class="n">test</span> <span class="n">-Patterns</span> <span class="s2">&quot;space&quot;</span><span class="p">,</span><span class="s2">&quot;planet&quot;</span> <span class="n">-Authorization</span> <span class="s2">&quot;admin:password&quot;</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This search is much slower than the <code class="docutils literal notranslate"><span class="pre">Find-CouchdbDocuments</span></code> cmdlet.</p>
</div>
</div>
<div class="section" id="selector">
<h3>Selector<a class="headerlink" href="#selector" title="Permalink to this headline">¶</a></h3>
<p>Selectors are expressed as a JSON object describing documents of interest. Within this structure, you can apply conditional logic using specially named fields.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;selector&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Arthur Dent&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;selector&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;FirstName&quot;</span><span class="p">:</span> <span class="s2">&quot;Arthur Dent&quot;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="p">{</span>
    <span class="nt">&quot;selector&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;name.FirstName&quot;</span><span class="p">:</span> <span class="s2">&quot;Arthur Dent&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="operators">
<h3>Operators<a class="headerlink" href="#operators" title="Permalink to this headline">¶</a></h3>
<p>Operators are identified by the use of a dollar sign ($) prefix in the name field.
There are two core types of operators in the selector syntax:</p>
<ul class="simple">
<li><p>Combination operators</p></li>
<li><p>Condition operators</p></li>
</ul>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;selector&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Arthur Dent&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>There are two implicit operators:</p>
<ul class="simple">
<li><p>Equality</p></li>
<li><p>And</p></li>
</ul>
<p>In a selector, any field containing a JSON value, but that has no operators in it, is considered to be an equality condition. The implicit equality test applies also for fields and subfields.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;selector&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;$eq&quot;</span><span class="p">:</span> <span class="s2">&quot;Arthur Dent&quot;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>is same to</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;selector&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Arthur Dent&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>List of available operators:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 8%" />
<col style="width: 5%" />
<col style="width: 86%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Operator type</p></th>
<th class="head"><p>Operator</p></th>
<th class="head"><p>Purpose</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>(In)equality</p></td>
<td><p>lt</p></td>
<td><p>The field is less than the argument</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>lte</p></td>
<td><p>The field is less than or equal to the argument</p></td>
</tr>
<tr class="row-even"><td></td>
<td><p>eq</p></td>
<td><p>The field is equal to the argument</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>ne</p></td>
<td><p>The field is not equal to the argument</p></td>
</tr>
<tr class="row-even"><td></td>
<td><p>gte</p></td>
<td><p>The field is greater than or equal to the argument</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>gt</p></td>
<td><p>The field is greater than the to the argument</p></td>
</tr>
<tr class="row-even"><td><p>Object</p></td>
<td><p>exists</p></td>
<td><p>Check whether the field exists or not, regardless</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>type</p></td>
<td><p>Check the document field’s type. Valid values are “null”, “boolean”, “number”, “string”, “array”, and “object”</p></td>
</tr>
<tr class="row-even"><td><p>Array</p></td>
<td><p>in</p></td>
<td><p>The document field must exist in the list provided</p></td>
</tr>
<tr class="row-odd"><td></td>
<td><p>nin</p></td>
<td><p>The document field not must exist in the list provided</p></td>
</tr>
<tr class="row-even"><td></td>
<td><p>size</p></td>
<td><p>Special condition to match the length of an array field in a document. Non-array fields cannot match this condition</p></td>
</tr>
<tr class="row-odd"><td><p>Miscellaneous</p></td>
<td><p>mod</p></td>
<td><p>Divisor and Remainder are both positive or negative integers. Non-integer values result in a 404.</p></td>
</tr>
<tr class="row-even"><td></td>
<td><p>regex</p></td>
<td><p>A regular expression pattern to match against the document field.The matching algorithms are based on the Perl Compatible Regular Expression (PCRE) library.</p></td>
</tr>
</tbody>
</table>
<p>Examples</p>
<div class="highlight-powershell notranslate"><div class="highlight"><pre><span></span><span class="n">using</span> <span class="n">module</span> <span class="n">PSCouchDB</span>
<span class="nv">$q</span> <span class="p">=</span> <span class="nb">New-Object</span> <span class="n">-TypeName</span> <span class="n">PSCouchDBQuery</span>
<span class="nv">$q</span><span class="p">.</span><span class="n">AddSelector</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span><span class="s2">&quot;Arthur Dent&quot;</span><span class="p">)</span>
<span class="nv">$q</span><span class="p">.</span><span class="n">AddSelectorOperator</span><span class="p">(</span><span class="s1">&#39;$eq&#39;</span><span class="p">)</span>
<span class="nv">$q</span><span class="p">.</span><span class="n">AddFields</span><span class="p">(</span><span class="s2">&quot;_id&quot;</span><span class="p">)</span>
<span class="nv">$q</span><span class="p">.</span><span class="n">AddFields</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">)</span>
<span class="nv">$q</span><span class="p">.</span><span class="n">AddFields</span><span class="p">(</span><span class="s2">&quot;planet&quot;</span><span class="p">)</span>
<span class="nb">Find-CouchDBDocuments</span> <span class="n">-Database</span> <span class="n">test</span> <span class="n">-Find</span> <span class="nv">$q</span><span class="p">.</span><span class="n">GetNativeQuery</span><span class="p">()</span> <span class="n">-Authorization</span> <span class="s2">&quot;admin:password&quot;</span>
</pre></div>
</div>
<div class="highlight-powershell notranslate"><div class="highlight"><pre><span></span><span class="nb">Find-CouchDBDocuments</span> <span class="n">-Database</span> <span class="n">test</span> <span class="n">-Selector</span> <span class="s2">&quot;name&quot;</span> <span class="n">-Operator</span> <span class="n">eq</span> <span class="n">-Value</span> <span class="s2">&quot;Arthur Dent&quot;</span> <span class="n">-Fields</span> <span class="n">_id</span><span class="p">,</span><span class="n">name</span><span class="p">,</span><span class="n">planet</span> <span class="n">-Authorization</span> <span class="s2">&quot;admin:password&quot;</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Pay attention to the <code class="docutils literal notranslate"><span class="pre">$</span></code> (dollar) sign. If you use the PSCouchDBQuery class or a native query, the sign is required.</p>
</div>
</div>
<div class="section" id="logical-operators">
<h3>Logical operators<a class="headerlink" href="#logical-operators" title="Permalink to this headline">¶</a></h3>
<p>Logical operators are used to combine selectors.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Logical operators are only avalaible when creating an object of type <code class="docutils literal notranslate"><span class="pre">PSCouchDBQuery</span></code> or use a native query string.
For more details, see <a class="reference external" href="classes.html">Classes section</a> section.</p>
</div>
<p>AND</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;$and&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="nt">&quot;_id&quot;</span><span class="p">:</span> <span class="p">{</span> <span class="nt">&quot;$gt&quot;</span><span class="p">:</span> <span class="kc">null</span> <span class="p">}</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;$eq&quot;</span><span class="p">:</span> <span class="s2">&quot;Arthur Dent&quot;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>OR</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Arthur Dent&quot;</span><span class="p">,</span>
    <span class="nt">&quot;$or&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span> <span class="nt">&quot;planet&quot;</span><span class="p">:</span> <span class="s2">&quot;Heart&quot;</span> <span class="p">},</span>
        <span class="p">{</span> <span class="nt">&quot;planet&quot;</span><span class="p">:</span> <span class="s2">&quot;Magrathea&quot;</span> <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>NOT</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;$eq&quot;</span><span class="p">:</span> <span class="s2">&quot;Arthur Dent&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;$eq&quot;</span><span class="p">:</span> <span class="s2">&quot;Slartibartfast&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;$not&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Ford Prefect&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<table class="docutils align-default">
<colgroup>
<col style="width: 8%" />
<col style="width: 92%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Operator</p></th>
<th class="head"><p>Purpose</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>and</p></td>
<td><p>Matches if all the selectors in the array match</p></td>
</tr>
<tr class="row-odd"><td><p>or</p></td>
<td><p>Matches if any of the selectors in the array match. All selectors must use the same index</p></td>
</tr>
<tr class="row-even"><td><p>not</p></td>
<td><p>Matches if the given selector does not match</p></td>
</tr>
<tr class="row-odd"><td><p>nor</p></td>
<td><p>Matches if none of the selectors in the array match</p></td>
</tr>
<tr class="row-even"><td><p>all</p></td>
<td><p>Matches an array value if it contains all the elements of the argument array</p></td>
</tr>
<tr class="row-odd"><td><p>elemMatch</p></td>
<td><p>Matches and returns all documents that contain an array field with at least one element that matches all the specified query criteria</p></td>
</tr>
<tr class="row-even"><td><p>allMatch</p></td>
<td><p>Matches and returns all documents that contain an array field with all its elements matching all the specified query criteria</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="sort">
<h3>Sort<a class="headerlink" href="#sort" title="Permalink to this headline">¶</a></h3>
<p>The sort field contains a list of field name and direction pairs, expressed as a basic array. The first field name and direction pair is the topmost level of sort. The second pair, if provided, is the next level of sort.
The direction value is “asc” for ascending, and “desc” for descending. If you omit the direction value, the default “asc” is used.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;selector&quot;</span><span class="p">:</span> <span class="p">{</span><span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Arthur Dent&quot;</span><span class="p">},</span>
    <span class="nt">&quot;sort&quot;</span><span class="p">:</span> <span class="p">[{</span><span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;asc&quot;</span><span class="p">},</span> <span class="p">{</span><span class="nt">&quot;planet&quot;</span><span class="p">:</span> <span class="s2">&quot;asc&quot;</span><span class="p">}]</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-powershell notranslate"><div class="highlight"><pre><span></span><span class="nb">Find-CouchDBDocuments</span> <span class="n">-Database</span> <span class="n">test</span> <span class="n">-Selector</span> <span class="s2">&quot;name&quot;</span> <span class="n">-Operator</span> <span class="n">eq</span> <span class="n">-Value</span> <span class="s2">&quot;Arthur Dent&quot;</span> <span class="n">-Fields</span> <span class="n">_id</span><span class="p">,</span><span class="n">name</span><span class="p">,</span><span class="n">planet</span> <span class="n">-Sort</span> <span class="n">name</span><span class="p">,</span><span class="n">planet</span> <span class="n">-Authorization</span> <span class="s2">&quot;admin:password&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="limit">
<h3>Limit<a class="headerlink" href="#limit" title="Permalink to this headline">¶</a></h3>
<p>Maximum number of results returned. Default is 25.</p>
<div class="highlight-powershell notranslate"><div class="highlight"><pre><span></span><span class="nb">Find-CouchDBDocuments</span> <span class="n">-Database</span> <span class="n">test</span> <span class="n">-Selector</span> <span class="s2">&quot;name&quot;</span> <span class="n">-Operator</span> <span class="n">eq</span> <span class="n">-Value</span> <span class="s2">&quot;Arthur Dent&quot;</span> <span class="n">-Fields</span> <span class="n">_id</span><span class="p">,</span><span class="n">name</span><span class="p">,</span><span class="n">planet</span> <span class="n">-Limit</span> <span class="n">100</span> <span class="n">-Authorization</span> <span class="s2">&quot;admin:password&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="skip">
<h3>Skip<a class="headerlink" href="#skip" title="Permalink to this headline">¶</a></h3>
<p>Skip the first ‘n’ results, where ‘n’ is the value specified.</p>
<div class="highlight-powershell notranslate"><div class="highlight"><pre><span></span><span class="nb">Find-CouchDBDocuments</span> <span class="n">-Database</span> <span class="n">test</span> <span class="n">-Selector</span> <span class="s2">&quot;name&quot;</span> <span class="n">-Operator</span> <span class="n">eq</span> <span class="n">-Value</span> <span class="s2">&quot;Arthur Dent&quot;</span> <span class="n">-Fields</span> <span class="n">_id</span><span class="p">,</span><span class="n">name</span><span class="p">,</span><span class="n">planet</span> <span class="n">-Skip</span> <span class="n">10</span> <span class="n">-Authorization</span> <span class="s2">&quot;admin:password&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="use-index">
<h3>Use index<a class="headerlink" href="#use-index" title="Permalink to this headline">¶</a></h3>
<p>Instruct a query to use a specific index.</p>
<div class="highlight-powershell notranslate"><div class="highlight"><pre><span></span><span class="nb">Find-CouchDBDocuments</span> <span class="n">-Database</span> <span class="n">test</span> <span class="n">-Selector</span> <span class="s2">&quot;name&quot;</span> <span class="n">-Operator</span> <span class="n">eq</span> <span class="n">-Value</span> <span class="s2">&quot;Arthur Dent&quot;</span> <span class="n">-Fields</span> <span class="n">_id</span><span class="p">,</span><span class="n">name</span><span class="p">,</span><span class="n">planet</span> <span class="n">-UseIndex</span> <span class="s2">&quot;index_planet&quot;</span> <span class="n">-Authorization</span> <span class="s2">&quot;admin:password&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="read-quorum">
<h3>Read quorum<a class="headerlink" href="#read-quorum" title="Permalink to this headline">¶</a></h3>
<p>Read quorum needed for the result. This defaults to 1, in which case the document found in the index is returned.</p>
<p>If set to a higher value, each document is read from at least that many replicas before it is returned in the results. This is likely to take more time than using only the document stored locally with the index.</p>
<div class="highlight-powershell notranslate"><div class="highlight"><pre><span></span><span class="nb">Find-CouchDBDocuments</span> <span class="n">-Database</span> <span class="n">test</span> <span class="n">-Selector</span> <span class="s2">&quot;name&quot;</span> <span class="n">-Operator</span> <span class="n">eq</span> <span class="n">-Value</span> <span class="s2">&quot;Arthur Dent&quot;</span> <span class="n">-Fields</span> <span class="n">_id</span><span class="p">,</span><span class="n">name</span><span class="p">,</span><span class="n">planet</span> <span class="n">-ReadQuorum</span> <span class="n">3</span> <span class="n">-Authorization</span> <span class="s2">&quot;admin:password&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="bookmark">
<h3>Bookmark<a class="headerlink" href="#bookmark" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>A string that enables you to specify which page of results you require.
Used for paging through result sets.
Every query returns an opaque string under the bookmark key that can then be passed back in a query to get the next page of results.
If any part of the selector query changes between requests, the results are undefined.</p>
</div></blockquote>
<div class="highlight-powershell notranslate"><div class="highlight"><pre><span></span><span class="nb">Find-CouchDBDocuments</span> <span class="n">-Database</span> <span class="n">test</span> <span class="n">-Selector</span> <span class="s2">&quot;name&quot;</span> <span class="n">-Operator</span> <span class="n">eq</span> <span class="n">-Value</span> <span class="s2">&quot;Arthur Dent&quot;</span> <span class="n">-Fields</span> <span class="n">_id</span><span class="p">,</span><span class="n">name</span><span class="p">,</span><span class="n">planet</span> <span class="n">-Bookmark</span> <span class="s2">&quot;my_bookmark&quot;</span> <span class="n">-Authorization</span> <span class="s2">&quot;admin:password&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="no-update">
<h3>No Update<a class="headerlink" href="#no-update" title="Permalink to this headline">¶</a></h3>
<p>Whether to update the index prior to returning the result. Default is true.</p>
<div class="highlight-powershell notranslate"><div class="highlight"><pre><span></span><span class="nb">Find-CouchDBDocuments</span> <span class="n">-Database</span> <span class="n">test</span> <span class="n">-Selector</span> <span class="s2">&quot;name&quot;</span> <span class="n">-Operator</span> <span class="n">eq</span> <span class="n">-Value</span> <span class="s2">&quot;Arthur Dent&quot;</span> <span class="n">-Fields</span> <span class="n">_id</span><span class="p">,</span><span class="n">name</span><span class="p">,</span><span class="n">planet</span> <span class="n">-NoUpdate</span> <span class="n">-Authorization</span> <span class="s2">&quot;admin:password&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="stable">
<h3>Stable<a class="headerlink" href="#stable" title="Permalink to this headline">¶</a></h3>
<p>Whether or not the view results should be returned from a “stable” set of shards.</p>
<div class="highlight-powershell notranslate"><div class="highlight"><pre><span></span><span class="nb">Find-CouchDBDocuments</span> <span class="n">-Database</span> <span class="n">test</span> <span class="n">-Selector</span> <span class="s2">&quot;name&quot;</span> <span class="n">-Operator</span> <span class="n">eq</span> <span class="n">-Value</span> <span class="s2">&quot;Arthur Dent&quot;</span> <span class="n">-Fields</span> <span class="n">_id</span><span class="p">,</span><span class="n">name</span><span class="p">,</span><span class="n">planet</span> <span class="n">-Stable</span> <span class="n">-Authorization</span> <span class="s2">&quot;admin:password&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="stale">
<h3>Stale<a class="headerlink" href="#stale" title="Permalink to this headline">¶</a></h3>
<p>Combination of <code class="docutils literal notranslate"><span class="pre">update=false</span></code> and <code class="docutils literal notranslate"><span class="pre">stable=true</span></code> options. Possible options: <code class="docutils literal notranslate"><span class="pre">&quot;ok&quot;</span></code></p>
<div class="highlight-powershell notranslate"><div class="highlight"><pre><span></span><span class="nb">Find-CouchDBDocuments</span> <span class="n">-Database</span> <span class="n">test</span> <span class="n">-Selector</span> <span class="s2">&quot;name&quot;</span> <span class="n">-Operator</span> <span class="n">eq</span> <span class="n">-Value</span> <span class="s2">&quot;Arthur Dent&quot;</span> <span class="n">-Fields</span> <span class="n">_id</span><span class="p">,</span><span class="n">name</span><span class="p">,</span><span class="n">planet</span> <span class="n">-Stale</span> <span class="s1">&#39;ok&#39;</span> <span class="n">-Authorization</span> <span class="s2">&quot;admin:password&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="execution-statistics">
<h3>Execution statistics<a class="headerlink" href="#execution-statistics" title="Permalink to this headline">¶</a></h3>
<p>Include execution statistics in the query response.</p>
<div class="highlight-powershell notranslate"><div class="highlight"><pre><span></span><span class="nb">Find-CouchDBDocuments</span> <span class="n">-Database</span> <span class="n">test</span> <span class="n">-Selector</span> <span class="s2">&quot;name&quot;</span> <span class="n">-Operator</span> <span class="n">eq</span> <span class="n">-Value</span> <span class="s2">&quot;Arthur Dent&quot;</span> <span class="n">-Fields</span> <span class="n">_id</span><span class="p">,</span><span class="n">name</span><span class="p">,</span><span class="n">planet</span> <span class="n">-ExecutionStats</span> <span class="n">-Authorization</span> <span class="s2">&quot;admin:password&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="explain">
<h3>Explain<a class="headerlink" href="#explain" title="Permalink to this headline">¶</a></h3>
<p>Shows which index is being used by the query.</p>
<div class="highlight-powershell notranslate"><div class="highlight"><pre><span></span><span class="nb">Find-CouchDBDocuments</span> <span class="n">-Database</span> <span class="n">test</span> <span class="n">-Selector</span> <span class="s2">&quot;name&quot;</span> <span class="n">-Operator</span> <span class="n">eq</span> <span class="n">-Value</span> <span class="s2">&quot;Arthur Dent&quot;</span> <span class="n">-Fields</span> <span class="n">_id</span><span class="p">,</span><span class="n">name</span><span class="p">,</span><span class="n">planet</span> <span class="n">-Sort</span> <span class="n">name</span><span class="p">,</span><span class="n">planet</span> <span class="n">-Explain</span> <span class="n">-Authorization</span> <span class="s2">&quot;admin:password&quot;</span>
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="ddoc.html" class="btn btn-neutral float-right" title="Design documents" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="databases.html" class="btn btn-neutral float-left" title="Databases" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Matteo Guadrini

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
    

	<style>
		/* Sidebar header (and topbar for mobile) */
		.wy-side-nav-search, .wy-nav-top {
			background: #1B2C3E;
		}
		/* Sidebar */
		.wy-nav-side {
			background: #2A425E;
		}
	</style>



</body>
</html>